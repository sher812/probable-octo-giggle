"use strict";
var __spreadArray = (this && this.__spreadArray) || function (to, from) {
    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)
        to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.useClickOutside = void 0;
var react_1 = require("react");
var constants_1 = require("../constants");
function useClickOutside(listener, elementsArg, boundaryElement) {
    if (elementsArg === void 0) { elementsArg = constants_1.EMPTY_ARRAY; }
    var _a = react_1.useState(null), element = _a[0], setElement = _a[1];
    var elements = __spreadArray([element], elementsArg);
    react_1.useEffect(function () {
        if (!listener)
            return undefined;
        var handleWindowMouseDown = function (evt) {
            var target = evt.target;
            if (!target) {
                return;
            }
            if (boundaryElement && !boundaryElement.contains(target)) {
                return;
            }
            var clickInside = false;
            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {
                var el = elements_1[_i];
                if (el && el.contains(target)) {
                    clickInside = true;
                }
            }
            if (!clickInside) {
                listener(evt);
            }
        };
        window.addEventListener('mousedown', handleWindowMouseDown);
        return function () {
            window.removeEventListener('mousedown', handleWindowMouseDown);
        };
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, __spreadArray([boundaryElement, listener], elements));
    return setElement;
}
exports.useClickOutside = useClickOutside;
//# sourceMappingURL=useClickOutside.js.map